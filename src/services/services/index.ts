// ** Axios
import axios from "axios";

// ** Configs
import {CONFIG_API} from "@/configs/api.ts";

// ** types
// TService,
import type {TSignIn} from "@/types/data";

// ** utils
import {getCookie} from "@/utils/cookieUtils.ts";

// ** Pages
import type {CreateServiceForm} from "@/pages/admin/service/create/form.create.service.tsx";
import type {EditServiceForm} from "@/pages/admin/service/edit/form.edit.service.tsx";

const url = CONFIG_API.SERVICE.INDEX;

export async function getListService() {
    // try {
    //     const response: TService[] = await axios.get(url);
    //
    //     return response;
    // } catch (error) {
    //     console.error(error);
    // }
    return [
        {
            "id": 1,
            "name": "Quay phim ‚Äì ch·ª•p ·∫£nh",
            "price": 16500000,
            "description": "Lace Studio ‚Äì n∆°i ghi d·∫•u cho b·∫°n nh·ªØng kho·∫£nh kh·∫Øc ƒë·∫∑c bi·ªát v√† ƒë·∫ßy √Ω nghƒ©a qua lƒÉng k√≠nh c·ªßa d·ªãch v·ª• quay phim v√† ch·ª•p ·∫£nh chuy√™n nghi·ªáp. L√† m·ªôt th∆∞∆°ng hi·ªáu trong h·ªá sinh th√°i d·ªãch v·ª• c∆∞·ªõi h·ªèi tr·ªçn g√≥i thu·ªôc Cater Ease Palace, Lace Studio cung c·∫•p c√°c d·ªãch v·ª•: ch·ª•p ·∫£nh c∆∞·ªõi (Pre-wedding), quay phim ch·ª•p h√¨nh, s·ª± ki·ªán doanh nghi·ªáp, ch√¢n dung c√° nh√¢n, gia ƒë√¨nh, ph·ª•c v·ª• c√°c s·ª± ki·ªán h·ªôi ngh·ªã, team building, sinh nh·∫≠t,‚Ä¶ Ch√∫ng t√¥i c√≥ phim tr∆∞·ªùng r·ªông 3000m2, ƒë√£ v√† ƒëang h·ª£p t√°c v·ªõi 100+ kh√°ch h√†ng l√† c√° nh√¢n, t·ªï ch·ª©c. V·ªõi ƒë·ªôi ng≈© nhi·∫øp ·∫£nh gi√†u kinh nghi·ªám v√† t√¢m huy·∫øt, ch√∫ng t√¥i cam k·∫øt ghi l·∫°i nh·ªØng b·ª©c ·∫£nh ƒë·∫πp nh·∫•t, video ch√¢n th·ª±c nh·∫•t. Cho d√π l√† c√°c bu·ªïi ch·ª•p ·∫£nh c√° nh√¢n, h√¨nh ·∫£nh s·∫£n ph·∫©m, s·ª± ki·ªán c∆∞·ªõi ho·∫∑c c√°c d·ª± √°n th∆∞∆°ng m·∫°i, ch√∫ng t√¥i lu√¥n s·∫µn l√≤ng ƒë·ªÉ ƒë√°p ·ª©ng m·ªçi y√™u c·∫ßu c·ªßa b·∫°n v√† mang l·∫°i s·ª± h√†i l√≤ng t·ªëi ƒëa. Ch√∫ng t√¥i cam k·∫øt lu√¥n ƒë·∫£m b·∫£o r·∫±ng m·ªói kh√°ch h√†ng ƒë·ªÅu nh·∫≠n ƒë∆∞·ª£c s·ª± chƒÉm s√≥c v√† ph·ª•c v·ª• t·∫≠n t√¢m nh·∫•t, c√πng v·ªõi nh·ªØng t√°c ph·∫©m ngh·ªá thu·∫≠t mang ƒë·∫≠m b·∫£n s·∫Øc c√° nh√¢n v√† c·∫£m x√∫c ri√™ng c·ªßa h·ªç. H√£y ƒë·ªÉ Lace Studio & Cater Ease Palace g√≥p ph·∫ßn l√†m n√™n c√¢u chuy·ªán ƒë·∫∑c bi·ªát c·ªßa b·∫°n th√¥ng qua ·ªëng k√≠nh s√°ng t·∫°o c·ªßa ch√∫ng t√¥i. Li√™n h·ªá ngay v·ªõi ch√∫ng t√¥i ƒë·ªÉ b·∫Øt ƒë·∫ßu h√†nh tr√¨nh ghi l·∫°i nh·ªØng kho·∫£nh kh·∫Øc kh√¥ng th·ªÉ qu√™n!",
            "images": [
                "https://res.cloudinary.com/dnj4p1bry/image/upload/v1751158352/camera_puokjg.jpg",
                "https://res.cloudinary.com/dnj4p1bry/image/upload/v1751158354/camera1_ngk9iq.jpg",
                "https://res.cloudinary.com/dnj4p1bry/image/upload/v1751158357/camera2_atja2r.jpg"
            ],
            "icon": "üé•",
            "deleted": false
        },
        {
            "id": 2,
            "name": "Th·ªùi trang c∆∞·ªõi",
            "price": 11000000,
            "description": "T·ªïng h·ª£p B·ªô s∆∞u t·∫≠p trang ph·ª•c c∆∞·ªõi t·∫°i Lace Bridal (V√°y c∆∞·ªõi, √°o d√†i, vest) s·∫Ω chi·ªÅu l√≤ng m·ªçi d√¢u r·ªÉ kh√≥ t√≠nh, mang ƒë·∫øn s·ª± l·ª±a ch·ªçn ho√†n h·∫£o ƒë·ªÉ c√°c c·∫∑p ƒë√¥i th·ªÉ hi·ªán phong c√°ch v√† c√° t√≠nh ri√™ng c·ªßa m√¨nh v√†o ng√†y c∆∞·ªõi. V·ªõi s·ª± k·∫øt h·ª£p gi·ªØa thi·∫øt k·∫ø hi·ªán ƒë·∫°i v√† s·ª± tinh t·∫ø c·ªßa th·ªùi trang c·ªï ƒëi·ªÉn, Lace Bridal mang ƒë·∫øn BST trang ph·ª•c c∆∞·ªõi ƒë·∫ßy ·∫•n t∆∞·ª£ng. H√≤a quy·ªán gi·ªØa s·ª± l√£ng m·∫°n c·ªßa ch·∫•t ren m·ªÅm m·∫°i v√† v·∫ª ƒë·∫πp ki√™u sa c·ªßa nh·ªØng ki·ªÉu d√°ng c√¥ng ch√∫a, Lace Bridal t·ª± h√†o cho ra m·∫Øt nh·ªØng chi·∫øc v√°y c∆∞·ªõi ch·∫•t l∆∞·ª£ng h√†ng ƒë·∫ßu ƒë·ªÉ gi√∫p c√¥ d√¢u t·ªèa s√°ng m·ªçi kho·∫£nh kh·∫Øc. M·ªói thi·∫øt k·∫ø ƒë·ªÅu kh·∫Øc h·ªça n√™n v·∫ª ƒë·∫πp ch√¢n ph∆∞∆°ng m·ªôt c√°ch g·ª£i c·∫£m c·ªßa ng∆∞·ªùi con g√°i Vi·ªát Nam. C∆° h·ªôi t·ªèa s√°ng nh∆∞ ‚Äún√†ng c√¥ng ch√∫a‚Äù trong ng√†y c∆∞·ªõi s·∫Ω kh√¥ng c√≤n l√† m∆° n·∫øu b·∫°n ƒë·ªìng h√†nh c√πng Lace Bridal ngay h√¥m nay. B·∫°n c√≥ th·ªÉ ƒë·∫øn v√† th·ª≠ v√°y t·∫°i Lace Studio ho·∫∑c li√™n h·ªá qua Hotline 0345 978 118 ƒë·ªÉ ƒë∆∞·ª£c t∆∞ v·∫•n chi ti·∫øt.",
            "images": [
                "https://res.cloudinary.com/dnj4p1bry/image/upload/v1751158657/weddingdress_b1brgn.jpg",
                "https://res.cloudinary.com/dnj4p1bry/image/upload/v1751158660/weddingdress1_nomg0z.jpg",
                "https://res.cloudinary.com/dnj4p1bry/image/upload/v1751158662/weddingdress2_h7qspp.jpg",
                "https://res.cloudinary.com/dnj4p1bry/image/upload/v1751158664/weddingdress3_xu9rzg.jpg"
            ],
            "icon": "üç∏",
            "deleted": false
        },
        {
            "id": 3,
            "name": "Trang tr√≠ ti·ªác",
            "price": 18000000,
            "description": "Ch√∫ng t√¥i hi·ªÉu r·∫±ng m·ªói c·∫∑p ƒë√¥i ƒë·ªÅu c√≥ m·ªôt c√¢u chuy·ªán ri√™ng v√† mong mu·ªën m·ªôt l·ªÖ c∆∞·ªõi l√Ω t∆∞·ªüng. V·ªõi ƒë·ªôi ng≈© chuy√™n nghi·ªáp v√† t·∫≠n t√¢m, su·ªët 12 nƒÉm qua, Lace Decoration ƒë√£ t·∫°o ra kh√¥ng gian trang tr√≠ tinh t·∫ø, ph·∫£n √°nh phong c√°ch v√† c√° t√≠nh c·ªßa c√°c c·∫∑p ƒë√¥i. T·ª´ vi·ªác l√™n √Ω t∆∞·ªüng ban ƒë·∫ßu cho ƒë·∫øn thi·∫øt k·∫ø v√† tri·ªÉn khai cu·ªëi c√πng, Lace Cater Ease Palace s·∫Ω ƒë·ªìng h√†nh c√πng c√°c b·∫°n ƒë·ªÉ t·∫°o ra m·ªôt kh√¥ng gian ƒë·∫∑c bi·ªát. D√π b·∫°n m∆° v·ªÅ m·ªôt l·ªÖ c∆∞·ªõi sang tr·ªçng v√† l√£ng m·∫°n, ho·∫∑c m·ªôt bu·ªïi ti·ªác ƒë∆°n gi·∫£n v√† ·∫•m c√∫ng, ch√∫ng t√¥i c√≥ ƒë·∫ßy ƒë·ªß s·ª± linh ho·∫°t v√† s√°ng t·∫°o ƒë·ªÉ bi·∫øn √Ω t∆∞·ªüng c·ªßa b·∫°n th√†nh hi·ªán th·ª±c. Lace tin ch·∫Øc r·∫±ng, ch√∫ng t√¥i l√† ng∆∞·ªùi b·∫°n ƒë·ªìng h√†nh ƒë√°ng tin c·∫≠y trong ng√†y c∆∞·ªõi c·ªßa b·∫°n. ƒê·ª´ng bƒÉn khoƒÉn ƒëi·ªÅu g√¨ c·∫£, h√£y ƒë·ªÉ ch√∫ng t√¥i chƒÉm s√≥c m·ªçi chi ti·∫øt, t·ª´ hoa trang tr√≠ ƒë·∫øn √°nh s√°ng, t·ª´ b√†n ti·ªác ƒë·∫øn kh√¥ng gian ch·ª•p h√¨nh, ƒë·ªÉ b·∫°n c√≥ th·ªÉ t·∫≠n h∆∞·ªüng ng√†y c∆∞·ªõi m·ªôt c√°ch ho√†n h·∫£o nh·∫•t.",
            "images": [
                "https://res.cloudinary.com/dnj4p1bry/image/upload/v1751158925/weddingtt_hs77ch.jpg",
                "https://res.cloudinary.com/dnj4p1bry/image/upload/v1751402321/alexander-sinn-mFhGgUWNWVg-unsplash_kl4imm.jpg",
                "https://res.cloudinary.com/dnj4p1bry/image/upload/v1751402323/snappr-S7twrJmc_1k-unsplash_schihk.jpg"
            ],
            "icon": "üê∞",
            "deleted": false
        },
        {
            "id": 4,
            "name": "C∆∞·ªõi tr·ªçn g√≥i",
            "price": 45500000,
            "description": "Ch·∫Øc ch·∫Øn r·∫±ng, ng√†y c∆∞·ªõi kh√¥ng ch·ªâ ƒë∆°n thu·∫ßn l√† s·ª± k·∫øt h·ª£p gi·ªØa hai con tim m√† c√≤n l√† h√†nh tr√¨nh t√¨m ki·∫øm ƒëi·ªÉm ch·∫°m ho√†n h·∫£o ‚Äì n∆°i m√† t·∫•t c·∫£ nh·ªØng khao kh√°t v√† ∆∞·ªõc m∆° c·ªßa c√°c b·∫°n ƒë∆∞·ª£c th·ªÉ hi·ªán. V√† Cater Ease Palace nh∆∞ m·ªôt ƒëi·ªÉm ch·∫°m ƒë·∫∑c bi·ªát, n∆°i tinh hoa c·ªßa ngh·ªá thu·∫≠t t·ªï ch·ª©c c∆∞·ªõi h·ªôi t·ª•. B·ªüi l·∫Ω t·∫°i ƒë√¢y, b·∫°n d·ªÖ d√†ng ch·∫°m t·ªõi nh·ªØng kho·∫£nh kh·∫Øc ƒë·∫πp nh·∫•t v·ªõi ngh·ªá thu·∫≠t ch·ª•p ·∫£nh c∆∞·ªõi/ ph√≥ng s·ª± c∆∞·ªõi; d·ªãch v·ª• trang tr√≠ c∆∞·ªõi ·∫•n t∆∞·ª£ng v√† tinh t·∫ø; b·ªô s∆∞u t·∫≠p v√°y c∆∞·ªõi v√† √°o d√†i thi·∫øt k·∫ø ƒë·ªôc quy·ªÅn v√† kh√¥ng gian c∆∞·ªõi sang tr·ªçng t·∫°i Cater Ease Palace",
            "images": [
                "https://res.cloudinary.com/dnj4p1bry/image/upload/v1751172116/weddingdress1_gav3da.jpg",
                "https://res.cloudinary.com/dnj4p1bry/image/upload/v1751172118/weddingdress2_cn8scs.jpg",
                "https://res.cloudinary.com/dnj4p1bry/image/upload/v1751172121/weddingdress1_pldxrd.jpg",
                "https://res.cloudinary.com/dnj4p1bry/image/upload/v1751172123/wedding2_pwjr7i.jpg"
            ],
            "icon": "üéØ",
            "deleted": false
        },
        {
            "id": 5,
            "name": "Sinh nh·∫≠t tr·ªçn g√≥i",
            "price": 34500000,
            "description": "Ch·∫Øc ch·∫Øn r·∫±ng, ng√†y c∆∞·ªõi kh√¥ng ch·ªâ ƒë∆°n thu·∫ßn l√† s·ª± k·∫øt h·ª£p gi·ªØa hai con tim m√† c√≤n l√† h√†nh tr√¨nh t√¨m ki·∫øm ƒëi·ªÉm ch·∫°m ho√†n h·∫£o ‚Äì n∆°i m√† t·∫•t c·∫£ nh·ªØng khao kh√°t v√† ∆∞·ªõc m∆° c·ªßa c√°c b·∫°n ƒë∆∞·ª£c th·ªÉ hi·ªán. V√† Cater Ease Palace nh∆∞ m·ªôt ƒëi·ªÉm ch·∫°m ƒë·∫∑c bi·ªát, n∆°i tinh hoa c·ªßa ngh·ªá thu·∫≠t t·ªï ch·ª©c c∆∞·ªõi h·ªôi t·ª•. B·ªüi l·∫Ω t·∫°i ƒë√¢y, b·∫°n d·ªÖ d√†ng ch·∫°m t·ªõi nh·ªØng kho·∫£nh kh·∫Øc ƒë·∫πp nh·∫•t v·ªõi ngh·ªá thu·∫≠t ch·ª•p ·∫£nh c∆∞·ªõi/ ph√≥ng s·ª± c∆∞·ªõi; d·ªãch v·ª• trang tr√≠ c∆∞·ªõi ·∫•n t∆∞·ª£ng v√† tinh t·∫ø; b·ªô s∆∞u t·∫≠p v√°y c∆∞·ªõi v√† √°o d√†i thi·∫øt k·∫ø ƒë·ªôc quy·ªÅn v√† kh√¥ng gian c∆∞·ªõi sang tr·ªçng t·∫°i Cater Ease Palace",
            "images": [
                "https://res.cloudinary.com/dnj4p1bry/image/upload/v1751160422/weddingtt_daexru.jpg"
            ],
            "icon": "ü§π",
            "deleted": false
        }
    ]
}

export async function getDetailService(id: number) {
    // try {
    //     const response: TService = await axios.get(`${url}/${id}`);
    //     return response;
    // } catch (error) {
    //     console.log(error);
    // }
    console.log(id)
    return {
        "id": 1,
        "name": "Quay phim ‚Äì ch·ª•p ·∫£nh",
        "price": 16500000,
        "description": "Lace Studio ‚Äì n∆°i ghi d·∫•u cho b·∫°n nh·ªØng kho·∫£nh kh·∫Øc ƒë·∫∑c bi·ªát v√† ƒë·∫ßy √Ω nghƒ©a qua lƒÉng k√≠nh c·ªßa d·ªãch v·ª• quay phim v√† ch·ª•p ·∫£nh chuy√™n nghi·ªáp. L√† m·ªôt th∆∞∆°ng hi·ªáu trong h·ªá sinh th√°i d·ªãch v·ª• c∆∞·ªõi h·ªèi tr·ªçn g√≥i thu·ªôc Cater Ease Palace, Lace Studio cung c·∫•p c√°c d·ªãch v·ª•: ch·ª•p ·∫£nh c∆∞·ªõi (Pre-wedding), quay phim ch·ª•p h√¨nh, s·ª± ki·ªán doanh nghi·ªáp, ch√¢n dung c√° nh√¢n, gia ƒë√¨nh, ph·ª•c v·ª• c√°c s·ª± ki·ªán h·ªôi ngh·ªã, team building, sinh nh·∫≠t,‚Ä¶ Ch√∫ng t√¥i c√≥ phim tr∆∞·ªùng r·ªông 3000m2, ƒë√£ v√† ƒëang h·ª£p t√°c v·ªõi 100+ kh√°ch h√†ng l√† c√° nh√¢n, t·ªï ch·ª©c. V·ªõi ƒë·ªôi ng≈© nhi·∫øp ·∫£nh gi√†u kinh nghi·ªám v√† t√¢m huy·∫øt, ch√∫ng t√¥i cam k·∫øt ghi l·∫°i nh·ªØng b·ª©c ·∫£nh ƒë·∫πp nh·∫•t, video ch√¢n th·ª±c nh·∫•t. Cho d√π l√† c√°c bu·ªïi ch·ª•p ·∫£nh c√° nh√¢n, h√¨nh ·∫£nh s·∫£n ph·∫©m, s·ª± ki·ªán c∆∞·ªõi ho·∫∑c c√°c d·ª± √°n th∆∞∆°ng m·∫°i, ch√∫ng t√¥i lu√¥n s·∫µn l√≤ng ƒë·ªÉ ƒë√°p ·ª©ng m·ªçi y√™u c·∫ßu c·ªßa b·∫°n v√† mang l·∫°i s·ª± h√†i l√≤ng t·ªëi ƒëa. Ch√∫ng t√¥i cam k·∫øt lu√¥n ƒë·∫£m b·∫£o r·∫±ng m·ªói kh√°ch h√†ng ƒë·ªÅu nh·∫≠n ƒë∆∞·ª£c s·ª± chƒÉm s√≥c v√† ph·ª•c v·ª• t·∫≠n t√¢m nh·∫•t, c√πng v·ªõi nh·ªØng t√°c ph·∫©m ngh·ªá thu·∫≠t mang ƒë·∫≠m b·∫£n s·∫Øc c√° nh√¢n v√† c·∫£m x√∫c ri√™ng c·ªßa h·ªç. H√£y ƒë·ªÉ Lace Studio & Cater Ease Palace g√≥p ph·∫ßn l√†m n√™n c√¢u chuy·ªán ƒë·∫∑c bi·ªát c·ªßa b·∫°n th√¥ng qua ·ªëng k√≠nh s√°ng t·∫°o c·ªßa ch√∫ng t√¥i. Li√™n h·ªá ngay v·ªõi ch√∫ng t√¥i ƒë·ªÉ b·∫Øt ƒë·∫ßu h√†nh tr√¨nh ghi l·∫°i nh·ªØng kho·∫£nh kh·∫Øc kh√¥ng th·ªÉ qu√™n!",
        "images": [
            "https://res.cloudinary.com/dnj4p1bry/image/upload/v1751158352/camera_puokjg.jpg",
            "https://res.cloudinary.com/dnj4p1bry/image/upload/v1751158354/camera1_ngk9iq.jpg",
            "https://res.cloudinary.com/dnj4p1bry/image/upload/v1751158357/camera2_atja2r.jpg"
        ],
        "icon": "üé•",
        "deleted": false
    }
}

export async function createService(dataService: CreateServiceForm) {
    const userCookie = getCookie("ECTA-info");
    const userInfo: TSignIn = userCookie ? JSON.parse(userCookie) : null;

    if (!userInfo) {
        console.error("No user info found in cookie");
        return false;
    }

    const {token} = userInfo;

    const formData = new FormData();

    formData.append("name", dataService.name);
    formData.append("price", dataService.price.toString());
    formData.append("description", dataService.description);
    formData.append("icon", dataService.icon);

    dataService.images.forEach((img) => {
        if (img instanceof File) {
            formData.append("images", img);
        }
    });

    try {
        const response = await axios.post(`${url}`, formData, {
            headers: {
                Authorization: `Bearer ${token}`,
            },
        });

        return response.data;
    } catch (error) {
        console.log(error);
    }
}

export async function editService(
    dataService: EditServiceForm,
    id: number,
    originalImages: string[]
) {
    const userCookie = getCookie("ECTA-info");
    const userInfo: TSignIn = userCookie ? JSON.parse(userCookie) : null;

    if (!userInfo) {
        console.error("No user info found in cookie");
        return false;
    }

    const {token} = userInfo;

    const formData = new FormData();
    formData.append("Name", dataService.name);
    formData.append("Price", dataService.price.toString());
    formData.append("Description", dataService.description);
    formData.append("Icon", dataService.icon);

    const addImages = dataService.images.filter(img => img instanceof File);
    const removeImages = originalImages.filter(img => !dataService.images.includes(img));

    addImages.forEach((file) => formData.append("AddImages", file));
    removeImages.forEach((url) => formData.append("RemoveImages", url));

    try {
        const response = await axios.patch(`${url}/${id}`, formData, {
            headers: {
                Authorization: `Bearer ${token}`,
            },
        });

        return response.data;
    } catch (error) {
        console.log(error);
        return null;
    }
}

export async function deleteService(id: number) {

    const userCookie = getCookie("ECTA-info");
    const userInfo: TSignIn = userCookie ? JSON.parse(userCookie) : null;

    if (!userInfo) {
        console.error("No user info found in cookie");
        return false;
    }

    const {token} = userInfo;

    try {
        const response = await axios.delete(`${url}/${id}`, {
            headers: {
                Authorization: `Bearer ${token}`,
            },
        });

        return response.data;
    } catch (error) {
        console.error("Failed to delete service:", error);
    }
}